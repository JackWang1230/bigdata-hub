# 零售业务

## 维度模型设计的4步过程
### 第1步 选择业务过程
业务过程：组织完成的微观活动，有以下特征：
- 业务过程通常用行为动词表示
- 通常由某个操作型系统支撑，比如账单或购买系统
- 业务过程建立或获取关键性能度量。
  - 有时这些度量是业务过程的直接结果，有时从其他时间获得
- 业务过程通常由输入激活，产生输出度量
  - 可能包含一系列过程，可能即是某些过程的输入，也是某些过程的输出
  - 一系列过程产生一系列事实表

注意：
1. 业务人员可能难以回答跟建模相关的专业名词，比如“对何种业务过程感兴趣”
2. 业务用户可能谈的是业务战略规划，不是业务过程。需要在调研的过程中将业务规划拆解到基本业务过程中
> 战略规划：管理层为提高竞争优势而制定的抽象企业规划
3. 业务部门或企业功能职责不等于业务过程

### 第2步 声明粒度
粒度：
- 粒度传递的是更事实度量有关的细节级别，回答“如何描述事实表中每一行的内容？”这个问题
- 粒度由获取业务过程事件的操作型系统的物理实现确定。
- 最终的粒度和主键是等价的。

典型的粒度声明（以业务术语表示粒度）：
- 客户销售事务上的每个产品扫描到一行中
- 医生开具的票据的列表内容项采用一行表示
- 机场登机又处理的每个登机牌采用一行表示
- 仓库中每种材料库存水平的每日快照采用一行表示每个银行账户每月的情况采用一行表示

注意：
- 声明粒度会被很多人误以为是可有可无的步骤，但却是不容忽视的关键步骤，设计组的每个人都需要对事实表粒度达成共识
- 设计之初没有声明粒度，整个设计就像建在流沙智商，对候选维度的讨论处于兜圈子的状态，不恰当的事实将隐藏在设计中，不适当的维度也会始终笼罩DW/BI实现

### 第3步 确定维度

要解决的问题：“业务人员如何描述来自业务过程度量事件的数据？”
- 使用健壮的维度集合来装饰事实表
- 维度表示承担每个度量环境中所有可能的单值描述符

注意：
- 选择每个维度时，应该罗列出所有具体的、文本类型的属性以充实每个维度表
> 设备维度，所有的属性有：设备版本、设备操作系统、设备型号、设备价格等等。也就是说，要把维度的所有字段考虑全

### 第4步 确定事实

通过回答“过程的度量是什么”这一问题来确定事实，商业用户非常愿意分析这些性能度量

注意：
- 所有候选事实都需要符合第2步定义的粒度，明显不停粒度的实施必须放在不同的事实表中
- 需要综合考虑业务用户需求和数据来源的实际情况，并与4个步骤联系
- 不能只考虑数据来源来建模数据，数据不能替代业务用户的输入（虽然可能不会像与商业用户交流那样复杂）
> 很多组织仍在采用这种看似最省力的数据驱动方法，但基本不会成功

![image](image/图3-1维度设计4步过程的关键输入.png)