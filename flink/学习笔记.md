## 学习笔记

#### 20210806
TableAPI特点：
- Table API是以表为中心的声明式编程
- Table API会在执行之前见过内置优化器优化

slot
- 资源slot化，意味着一个subtas不需要跟来自其他job的subtask竞争被TaskManager管理的内存
- subtask之间相互隔离
- 一个TaskManager多个slot的好处
    - 意味着更多的subtask可以共享同一个JVM
    - 同一个JVM进程中，task将共享TCP（基于多路复用）和心跳信息
    - 也可能共享数据集和数据结构，减少了每个task的负载

flink中的子任务subtask，理解为一个算子就是一个subtask，并行执行的时候，就会有多个subtask。相当于1对多

程序 => 逻辑数据流dataflow
- dataflow是一个有向无环图
- 程序中的转换算子(transform)跟dataflow中的算子（operator）大部分一一对应，少部分一多对应

执行图：
- client生成StreamGraph
- client生成JobGraph，对StreamGraph做优化，提交给JobManager
- JobManager生成ExecutionGraph，JobGraph的并行化版本，调度层最核心的结构
- task的运行构成物理执行图，物理执行图不是一个具体的数据结构

并行度parallelism
- 一个特定算子的subtask个数
- 不同算子的并行度可以不一样


#### 20210831

迟到的流数据，它的事件时间有两种可能：乱序、升序。
因此处理这两种情况，需要使用的watermark分别为：
- BoundedOutOfOrdernessTimestampExtractor
- AscendingTimestampExtractor

assignTimestampsAndWatermarks(
	AssignerWithPeriodicWatermarks<T> timestampAndWatermarkAssigner)

AssignerWithPeriodicWatermarks
- 周期性生成watermark
- 方法是：extractTimestamp
- 使用场景：流数据密集

AssignerWithPunctuatedWatermarks
- 断点式生成watermark
- 方法是：checkAndGetNextWatermark
- 使用场景：流数据稀疏
